<div id="map" class="map-responsive" #map leaflet [leafletOptions]="options" (leafletMapReady)="onMapReady($event)"></div>

<div class="center-div" [hidden]="progress?.percentage === 100">
  <img style="margin: 0 auto; margin-left: -70px;" src="/assets/images/loading.gif">
</div>

<div class="desktop" *ngIf="summaries">
    <div id="cari" style="display: inline-flex">
        <a [routerLink]="['/summary/','master']" title="Kembali Ke Beranda">
          <img src="/assets/images/bpppti.png">
        </a>
        <h5> {{summaries.region.name}} </h5>
    </div>

    <div class="prevnext" style="float:right; margin-top: 2px;">
      <button class="prev" (click)="prev()">
        <span style="white-space: nowrap; text-overflow:ellipsis; overflow: hidden; max-width: 3px;"><i class="fa fa-arrow-left"></i> {{prevDesa}}</span>
      </button>
      <button class="next"  (click)="next()">
        <span style="white-space: nowrap; text-overflow:ellipsis; overflow: hidden; max-width: 3px;"> {{nextDesa}} <i class="fa fa-arrow-right"></i></span>
      </button>
    </div>
    
    <div class="show-hide-side">
      <button class="shide" (click)="sidebarCollapsed = !sidebarCollapsed" id="shide">Rincian â–¾</button>
    </div>
    
    <div class="sidebar" id="sidebar" *ngIf="!sidebarCollapsed">
      <a href="#" (click)="setActiveMenu('apbdes')">
        <div class="side" [ngClass]="{'active': activeMenu === 'apbdes' }">
          <div class="icon">
            <i class="fa fa-money"></i>
          </div>
          <div class="desc">
            <h4>Rp {{summaries.penganggaran_budgeted_revenue | number:'3.0-0'}} (APBDes {{summaries.penganggaran_year}}) </h4>
          </div>
        </div>
      </a>
      <a href="#" (click)="setActiveMenu('boundary')">
        <div class="side" [ngClass]="{'active': activeMenu === 'boundary' }">
          <div class="icon">
            <i class="fa fa-map"></i>
          </div>
          <div class="desc">
              <h4> {{summaries.pemetaan_desa_boundary / 10000 | number:'1.0-0' }} Ha </h4>
          </div>
    
        </div>
      </a>
      <a href="#" (click)="setActiveMenu('penduduk')">
        <div class="side" [ngClass]="{'active': activeMenu === 'penduduk' }">
          <div class="icon">
            <i class="fa fa-male"></i>
          </div>
          <div class="desc">
            <h4>
              <i class="fa fa-mars"></i> {{summaries.penduduk_sex_male}}&nbsp;&nbsp;
              <i class="fa fa-venus"></i> {{summaries.penduduk_sex_female}}</h4>
          </div>
        </div>
      </a>
      <a href="#" (click)="setActiveMenu('schools')">
        <div class="side" [ngClass]="{'active': activeMenu === 'schools' }">
          <div class="icon">
            <i class="fa fa-building"></i>
          </div>
          <div class="desc">
            <span>
                <img src="/assets/images/tk.png" style="width: 20px; height: 20px; padding-left: 2px;" title="TK"/> 
                {{summaries.pemetaan_school_tk}}
            </span>
            <span>
                <img src="/assets/images/sd.png" style="width: 20px; height: 20px; padding-left: 2px;" title="SD"/> 
                {{summaries.pemetaan_school_sd}}
            </span>
            <span>
                <img src="/assets/images/smp.png" style="width: 20px; height: 20px; padding-left: 2px;" title="SMP"/> 
                {{summaries.pemetaan_school_smp}}
            </span>
            <span>
                <img src="/assets/images/sma.png" style="width: 20px; height: 20px; padding-left: 2px;" title="SMA"/> 
                {{summaries.pemetaan_school_sma}}
            </span>
            <span>
                <img src="/assets/images/pt.png" style="width: 20px; height: 20px; padding-left: 2px;" title="PT"/> 
                {{summaries.pemetaan_school_pt}}
            </span>
           
          </div>
        </div>
      </a>
      <a href="#" (click)="setActiveMenu('landuse')">
        <div class="side" [ngClass]="{'active': activeMenu === 'landuse' }">
          <div class="icon">
            <i class="fa fa-leaf"></i>
          </div>
          <div class="desc">
            <span>
                <img src="/assets/images/pertanian.png" style="width: 20px; height: 20px; padding-left: 2px;" title="Pertanian"/> 
                {{summaries.pemetaan_landuse_farmland_area / 10000 | number:'1.0-0'}} Ha
            </span>
            <span>
                <img src="/assets/images/perkebunan.png" style="width: 20px; height: 20px; padding-left: 2px;" title="Perkebunan"/> 
                {{summaries.pemetaan_landuse_orchard_area / 10000 | number:'1.0-0'}} Ha
            </span>
            <span>
                <img src="/assets/images/hutan.png" style="width: 20px; height: 20px; padding-left: 2px;" title="Hutan"/> 
                {{summaries.pemetaan_landuse_forest_area / 10000 | number:'1.0-0'}} Ha 
            </span>
          </div>
        </div>
      </a>
    </div>

    <ul class="list-group legend" *ngIf="isLegendShown" style="width: 200px;">
      <li class="list-group-item" *ngFor="let legend of legends" style="margin-bottom: 10px;" [style.background-color]="legend.color">
        <img src="{{legend.url}}" style="width: 30px; height: 30px;"/> 
        <span style="float: right; padding-top: 10px;" [style.color]="legend.textColor ? legend.textColor : 'black'">
            {{legend.label}} {{legend.total ?  ' - '  +  legend.total : '' }} 
        </span>
      </li>
    </ul>
    <div class="legend" style="position: fixed; top: 240px; width: 500px; background: white; padding: 0" [hidden]="!isPekerjaanStatisticShown">
      <div id="pekerjaan">
        <svg style="height: 250px; width: 100%; margin-left: -80px;"></svg>
      </div>
    </div>
    <div class="legend" style="position: fixed; top: 240px; width: 500px; background: white; padding: 0" [hidden]="!isPendidikanStatisticShown">
      <div id="pendidikan">
        <svg style="height: 250px; width: 100%; margin-left: -60px;"></svg>
      </div>
    </div>
</div>

<div class="mobile" *ngIf="summaries" style="overflow: hidden;">
   <div id="cari" style="display: inline-flex; width: 380px;">
      <a [routerLink]="['/summary/','master']" title="Kembali Ke Beranda">
        <img src="/assets/images/bpppti.png">
      </a>
      <h5> {{summaries.region.name}} </h5>
    </div>

    <div class="prevnext">
      <button class="prev" (click)="prev()">
        <span style="white-space: nowrap; text-overflow:ellipsis; overflow: hidden; max-width: 3px;"><i class="fa fa-arrow-left"></i> {{prevDesa}}</span>
      </button>
      <button class="next"  (click)="next()">
        <span style="white-space: nowrap; text-overflow:ellipsis; overflow: hidden; max-width: 3px;"> {{nextDesa}} <i class="fa fa-arrow-right"></i></span>
      </button>
    </div>
    <div style="margin-top: 10px; width: 600px; height: 300px; overflow-y: scroll;">
        <a href="#" (click)="setActiveMenu('apbdes')">
            <div class="side" [ngClass]="{'active': activeMenu === 'apbdes' }">
              <div class="icon">
                <i class="fa fa-money"></i>
              </div>
              <div class="desc">
                <h4>Rp {{summaries.penganggaran_budgeted_revenue | number:'3.0-0'}} (APBDes {{summaries.penganggaran_year}}) </h4>
              </div>
            </div>
          </a>
          <a href="#" (click)="setActiveMenu('boundary')">
            <div class="side" [ngClass]="{'active': activeMenu === 'boundary' }">
              <div class="icon">
                <i class="fa fa-map"></i>
              </div>
              <div class="desc">
                  <h4> {{summaries.pemetaan_desa_boundary / 10000 | number:'1.0-0' }} Ha </h4>
              </div>
        
            </div>
          </a>
          <a href="#" (click)="setActiveMenu('gender')">
            <div class="side" [ngClass]="{'active': activeMenu === 'gender' }">
              <div class="icon">
                <i class="fa fa-male"></i>
              </div>
              <div class="desc">
                <h4>
                  <i class="fa fa-mars"></i> {{summaries.penduduk_sex_male}}&nbsp;&nbsp;
                  <i class="fa fa-venus"></i> {{summaries.penduduk_sex_female}}</h4>
              </div>
            </div>
          </a>
          <a href="#" (click)="setActiveMenu('schools')">
            <div class="side" [ngClass]="{'active': activeMenu === 'schools' }">
              <div class="icon">
                <i class="fa fa-building"></i>
              </div>
              <div class="desc">
                <h4> {{summaries.pemetaan_school_tk}} <strong>TK</strong> {{summaries.pemetaan_school_sd}} <strong>SD</strong>  {{summaries.pemetaan_school_smp}} <strong>SMP</strong>  {{summaries.pemetaan_school_sma}} <strong>SMA</strong>  {{summaries.pemetaan_school_pt}} <strong>PT</strong> </h4>
              </div>
            </div>
          </a>
          <a href="#" (click)="setActiveMenu('landuse')">
            <div class="side" [ngClass]="{'active': activeMenu === 'landuse' }">
              <div class="icon">
                <i class="fa fa-leaf"></i>
              </div>
              <div class="desc">
                <span>
                    <img src="/assets/images/pertanian.png" style="width: 20px; height: 20px; padding-left: 2px;" title="Pertanian"/> 
                    {{summaries.pemetaan_landuse_farmland_area / 10000 | number:'1.0-0'}} Ha
                </span>
                <span>
                    <img src="/assets/images/perkebunan.png" style="width: 20px; height: 20px; padding-left: 2px;" title="Perkebunan"/> 
                    {{summaries.pemetaan_landuse_orchard_area / 10000 | number:'1.0-0'}} Ha
                </span>
                <span>
                    <img src="/assets/images/hutan.png" style="width: 20px; height: 20px; padding-left: 2px;" title="Hutan"/> 
                    {{summaries.pemetaan_landuse_forest_area / 10000 | number:'1.0-0'}} Ha 
                </span>
              </div>
            </div>
          </a>
    </div>
    <ul class="list-group" *ngIf="isLegendShown" style="position: fixed; width: 100%; display: inline-flex; left: 0; top: 0; background-color: #fff; box-shadow: 1px 1px 1px #888;">
      <li class="list-group-item" *ngFor="let legend of legends" style="width: auto; height: 35px;" [style.background-color]="legend.color">
        <img src="{{legend.url}}" style="width: 20px; height: 20px;"/> 
        <span [style.color]="legend.textColor ? legend.textColor : 'black'">
            {{legend.label}} {{legend.total ?  ' - '  +  legend.total : '' }} 
        </span>
      </li>
    </ul>
</div>
